(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{WQ7Y:function(e,i,t){"use strict";t.r(i),t.d(i,"OrderBaseModule",(function(){return y}));var r=t("mrSG"),s=t("fXoL"),n=t("5+WD"),a=t("lKJ0");let d=(()=>{class e{constructor(e){this.transmissionService=e,this.currentInstanceOf="OrderBaseService",this.dragdropList=[],this.dragdropListTc=[],this.ElementList=[],this.releasedragdropList=[],this.releaseElementList=[],this.linedragdropList=[],this.lineElementList=[],this.csvHeader=[],this.csvHeaderAll=[],this.csvRow=[],this.csvRowAll=[],this.xmlArray=[],this.loader={i:!1,d:!1},this.errors={csv:[],server:""},this.uploadProgress=0,this.statusRequest={transmission:[],reProcess:!0,xids:[]},this.showStatus=!1,this.statusCount={p:0,e:0,s:0,f:0},this.xids=[],this.responseTransmissions=[],this.getViewUrl=(e,i,t)=>{if("P"!==t)return"";const r=this.csvHeader.findIndex(e=>e===this.dragdropListTc[this.itemIdIndex].displayText),s=this.csvHeader.findIndex(e=>e===this.dragdropListTc[this.itemIdDomain].displayText);return-1===r?"":e.replace("GTM_OTM_OBJECT","OrderBase").replace("GTM_OTM_MANAGER_LAYOUT_GID","ORDER_BASE_VIEW").replace("GTM_OTM_FINDER_SET","OB_ORDER_BASE").replace("GTM_OTM_OBJECT_GID",`${this.csvRow[i][s]||this.transmissionService.userDetails.domain}.${this.csvRow[i][r].toUpperCase()}`)}}linedrop(e){Object(n.d)(this.linedragdropList,e.previousIndex,e.currentIndex),this.dragdropList=[...this.releasedragdropList,...this.linedragdropList]}releasedrop(e){Object(n.d)(this.releasedragdropList,e.previousIndex,e.currentIndex),this.dragdropList=[...this.releasedragdropList,...this.linedragdropList]}releaseValueChange(e){return Object(r.a)(this,void 0,void 0,(function*(){return this.releasedragdropList=e.required?this.releaseElementList.filter(e=>!0===e.required):this.releasedragdropList.filter(i=>i.name!==e.name),this.dragdropList=[...this.releasedragdropList,...this.linedragdropList],yield this.transmissionService.updateOrderBase(e)}))}lineValueChange(e){return Object(r.a)(this,void 0,void 0,(function*(){return this.linedragdropList=e.required?this.lineElementList.filter(e=>!0===e.required):this.linedragdropList.filter(i=>i.name!==e.name),this.dragdropList=[...this.releasedragdropList,...this.linedragdropList],yield this.transmissionService.updateOrderBase(e)}))}onUpload(e){return Object(r.a)(this,void 0,void 0,(function*(){this.itemIdIndex=this.dragdropListTc.findIndex(e=>e.path[0].includes("TransOrderGid")&&e.path[0].includes("Xid")),this.itemIdDomain=this.dragdropListTc.findIndex(e=>e.path[0].includes("TransOrderGid")&&e.path[0].includes("DomainName"));const i={dragdropList:this.dragdropListTc,containLines:!0,parentGidIdentifierPathString:"TransOrderGid",lineIdentifierPathString:"TransOrderLine"};yield this.transmissionService.onUpload(e,i,this)}))}onRefreshStatus(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.transmissionService.onRefreshStatus(this)}))}sendDataToGtm(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.transmissionService.sendDataToGtm(this,"TransOrderGid")}))}getInitialState(e){e.table&&(this.csvHeader.length=0,this.csvRow.length=0,this.showStatus=!1,this.statusCount={p:0,e:0,s:0,f:0}),this.xmlArray.length=0,this.uploadProgress=0,this.errors.csv.length=0,this.errors.server=""}}return e.\u0275fac=function(i){return new(i||e)(s.gc(a.a))},e.\u0275prov=s.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=t("tyNb"),o=t("ofXK"),l=t("wZkO"),h=t("CW4N"),p=t("bv9b");const v=["fileInput"];function m(e,i){if(1&e&&(s.ac(0),s.cc(1,"h2",8),s.Mc(2),s.bc(),s.Xb(3,"mat-progress-bar",9),s.Zb()),2&e){const e=s.oc(3);s.Jb(2),s.Oc("",e.itemService.uploadProgress," %"),s.Jb(1),s.vc("color",e.transmissionService.getInstanceColor())("bufferValue",e.itemService.uploadProgress+20)("value",e.itemService.uploadProgress)}}function u(e,i){1&e&&(s.cc(0,"div",6),s.cc(1,"div",10),s.Mc(2,"Loading"),s.bc(),s.bc())}function g(e,i){if(1&e&&(s.cc(0,"div"),s.cc(1,"div",6),s.Lc(2,m,4,4,"ng-container",0),s.Lc(3,u,3,0,"div",7),s.bc(),s.bc()),2&e){const e=s.oc(2);s.Jb(2),s.vc("ngIf",e.itemService.loader.d),s.Jb(1),s.vc("ngIf",e.itemService.loader.i)}}function b(e,i){if(1&e&&(s.ac(0),s.cc(1,"mat-tab-group",2),s.cc(2,"mat-tab",3),s.Xb(3,"app-shared-tab",4),s.bc(),s.cc(4,"mat-tab",5),s.Xb(5,"app-shared-tab",4),s.bc(),s.bc(),s.Lc(6,g,4,2,"div",0),s.Zb()),2&e){const e=s.oc();s.Jb(1),s.vc("color",e.transmissionService.getInstanceColor()),s.Jb(2),s.vc("hasChild",!0)("tabTitle","Order Base")("itemService",e.itemService)("isAdminTab",!1),s.Jb(2),s.vc("hasChild",!0)("tabTitle","Order Base ")("itemService",e.itemService)("isAdminTab",!0),s.Jb(1),s.vc("ngIf",e.itemService.loader.i||e.itemService.loader.d)}}function f(e,i){if(1&e&&(s.cc(0,"div",11),s.cc(1,"span",12),s.Mc(2,"\xd7"),s.bc(),s.cc(3,"div",13),s.Mc(4),s.bc(),s.bc()),2&e){const e=s.oc();s.Jb(4),s.Oc(" ",e.error," ")}}let L=(()=>{class e{constructor(e,i,t){this.itemService=e,this.transmissionService=i,this.activatedRoute=t,this.isAdminTab=!1}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){const{data:e,error:i}=this.activatedRoute.snapshot.data.data;if(i)return this.error=i;this.itemService.ElementList=e.filter(e=>this.getElement(e)),this.transmissionService.displayOrderBase=e,this.itemService.dragdropList=this.itemService.ElementList.filter(e=>e.required),this.itemService.dragdropListTc=e.filter(e=>e.required),this.itemService.releaseElementList=e.filter(e=>this.getReleaseElement(e)),this.itemService.lineElementList=e.filter(e=>this.getLineElement(e)),this.itemService.releasedragdropList=this.itemService.releaseElementList.filter(e=>e.display&&e.required),this.itemService.linedragdropList=this.itemService.lineElementList.filter(e=>e.display&&e.required)}))}getElement(e){return this.transmissionService.getElement(e)}getReleaseElement(e){return e.path.length>1?!e.type.includes("Transaction Line")&&e.display:!(!e.display||!this.transmissionService.getElement(e))&&!e.type.includes("Line")&&e.display}getLineElement(e){return e.path.length>1?e.display&&e.type.includes("Transaction Line"):!(!e.display||!this.transmissionService.getElement(e))&&e.display&&e.type.includes("Line")}}return e.\u0275fac=function(i){return new(i||e)(s.Wb(d),s.Wb(a.a),s.Wb(c.a))},e.\u0275cmp=s.Qb({type:e,selectors:[["app-order-base"]],viewQuery:function(e,i){var t;1&e&&s.Sc(v,!0),2&e&&s.Cc(t=s.lc())&&(i.myInputVariable=t.first)},decls:2,vars:2,consts:[[4,"ngIf"],["class","alert danger",4,"ngIf"],["dynamicHeight","",3,"color"],["label","Download Template"],[3,"hasChild","tabTitle","itemService","isAdminTab"],["label","Create Template"],[1,"ui","active","inverted","dimmer"],["class","ui active inverted dimmer",4,"ngIf"],[1,"example-h2"],["mode","buffer",2,"width","50%",3,"color","bufferValue","value"],[1,"ui","text","loader"],[1,"alert","danger"],["onclick","this.parentElement.style.display='none';",1,"closebtn"],[1,"alert-header"]],template:function(e,i){1&e&&(s.Lc(0,b,7,10,"ng-container",0),s.Lc(1,f,5,1,"div",1)),2&e&&(s.vc("ngIf",!i.error),s.Jb(1),s.vc("ngIf",i.error))},directives:[o.m,l.b,l.a,h.a,p.a],styles:[""]}),e})();var S=t("jvDc"),T=t("tk/3"),I=t("ZRbq");const O=[{path:"",component:L}];let y=(()=>{class e{}return e.\u0275mod=s.Ub({type:e}),e.\u0275inj=s.Tb({factory:function(i){return new(i||e)},providers:[d,{provide:T.a,useClass:I.a,multi:!0}],imports:[[c.i.forChild(O),S.a]]}),e})()}}]);