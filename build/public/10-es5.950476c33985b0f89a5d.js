function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{WQ7Y:function(e,r,t){"use strict";t.r(r),t.d(r,"OrderBaseModule",(function(){return C}));var i,n=t("mrSG"),a=t("fXoL"),s=t("5+WD"),o=t("lKJ0"),c=((i=function(){function e(r){var t=this;_classCallCheck(this,e),this.transmissionService=r,this.currentInstanceOf="OrderBaseService",this.dragdropList=[],this.dragdropListTc=[],this.ElementList=[],this.releasedragdropList=[],this.releaseElementList=[],this.linedragdropList=[],this.lineElementList=[],this.csvHeader=[],this.csvHeaderAll=[],this.csvRow=[],this.csvRowAll=[],this.xmlArray=[],this.loader={i:!1,d:!1},this.errors={csv:[],server:""},this.uploadProgress=0,this.statusRequest={transmission:[],reProcess:!0,xids:[]},this.showStatus=!1,this.statusCount={p:0,e:0,s:0,f:0},this.xids=[],this.responseTransmissions=[],this.getViewUrl=function(e,r,i){if("P"!==i)return"";var n=t.csvHeader.findIndex((function(e){return e===t.dragdropListTc[t.itemIdIndex].displayText})),a=t.csvHeader.findIndex((function(e){return e===t.dragdropListTc[t.itemIdDomain].displayText}));return-1===n?"":e.replace("GTM_OTM_OBJECT","OrderBase").replace("GTM_OTM_MANAGER_LAYOUT_GID","ORDER_BASE_VIEW").replace("GTM_OTM_FINDER_SET","OB_ORDER_BASE").replace("GTM_OTM_OBJECT_GID","".concat(t.csvRow[r][a]||t.transmissionService.userDetails.domain,".").concat(t.csvRow[r][n].toUpperCase()))}}return _createClass(e,[{key:"linedrop",value:function(e){Object(s.d)(this.linedragdropList,e.previousIndex,e.currentIndex),this.dragdropList=[].concat(_toConsumableArray(this.releasedragdropList),_toConsumableArray(this.linedragdropList))}},{key:"releasedrop",value:function(e){Object(s.d)(this.releasedragdropList,e.previousIndex,e.currentIndex),this.dragdropList=[].concat(_toConsumableArray(this.releasedragdropList),_toConsumableArray(this.linedragdropList))}},{key:"releaseValueChange",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.releasedragdropList=e.required?this.releaseElementList.filter((function(e){return!0===e.required})):this.releasedragdropList.filter((function(r){return r.name!==e.name})),this.dragdropList=[].concat(_toConsumableArray(this.releasedragdropList),_toConsumableArray(this.linedragdropList)),r.next=4,this.transmissionService.updateOrderBase(e);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r,this)})))}},{key:"lineValueChange",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.linedragdropList=e.required?this.lineElementList.filter((function(e){return!0===e.required})):this.linedragdropList.filter((function(r){return r.name!==e.name})),this.dragdropList=[].concat(_toConsumableArray(this.releasedragdropList),_toConsumableArray(this.linedragdropList)),r.next=4,this.transmissionService.updateOrderBase(e);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r,this)})))}},{key:"onUpload",value:function(e){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.itemIdIndex=this.dragdropListTc.findIndex((function(e){return e.path[0].includes("TransOrderGid")&&e.path[0].includes("Xid")})),this.itemIdDomain=this.dragdropListTc.findIndex((function(e){return e.path[0].includes("TransOrderGid")&&e.path[0].includes("DomainName")})),t={dragdropList:this.dragdropListTc,containLines:!0,parentGidIdentifierPathString:"TransOrderGid",lineIdentifierPathString:"TransOrderLine"},r.next=4,this.transmissionService.onUpload(e,t,this);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"onRefreshStatus",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transmissionService.onRefreshStatus(this);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"sendDataToGtm",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transmissionService.sendDataToGtm(this,"TransOrderGid");case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getInitialState",value:function(e){e.table&&(this.csvHeader.length=0,this.csvRow.length=0,this.showStatus=!1,this.statusCount={p:0,e:0,s:0,f:0}),this.xmlArray.length=0,this.uploadProgress=0,this.errors.csv.length=0,this.errors.server=""}}]),e}()).\u0275fac=function(e){return new(e||i)(a.gc(o.a))},i.\u0275prov=a.Sb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),d=t("tyNb"),u=t("ofXK"),l=t("wZkO"),h=t("CW4N"),p=t("bv9b"),f=["fileInput"];function m(e,r){if(1&e&&(a.ac(0),a.cc(1,"h2",8),a.Mc(2),a.bc(),a.Xb(3,"mat-progress-bar",9),a.Zb()),2&e){var t=a.oc(3);a.Jb(2),a.Oc("",t.itemService.uploadProgress," %"),a.Jb(1),a.vc("color",t.transmissionService.getInstanceColor())("bufferValue",t.itemService.uploadProgress+20)("value",t.itemService.uploadProgress)}}function v(e,r){1&e&&(a.cc(0,"div",6),a.cc(1,"div",10),a.Mc(2,"Loading"),a.bc(),a.bc())}function b(e,r){if(1&e&&(a.cc(0,"div"),a.cc(1,"div",6),a.Lc(2,m,4,4,"ng-container",0),a.Lc(3,v,3,0,"div",7),a.bc(),a.bc()),2&e){var t=a.oc(2);a.Jb(2),a.vc("ngIf",t.itemService.loader.d),a.Jb(1),a.vc("ngIf",t.itemService.loader.i)}}function g(e,r){if(1&e&&(a.ac(0),a.cc(1,"mat-tab-group",2),a.cc(2,"mat-tab",3),a.Xb(3,"app-shared-tab",4),a.bc(),a.cc(4,"mat-tab",5),a.Xb(5,"app-shared-tab",4),a.bc(),a.bc(),a.Lc(6,b,4,2,"div",0),a.Zb()),2&e){var t=a.oc();a.Jb(1),a.vc("color",t.transmissionService.getInstanceColor()),a.Jb(2),a.vc("hasChild",!0)("tabTitle","Order Base")("itemService",t.itemService)("isAdminTab",!1),a.Jb(2),a.vc("hasChild",!0)("tabTitle","Order Base ")("itemService",t.itemService)("isAdminTab",!0),a.Jb(1),a.vc("ngIf",t.itemService.loader.i||t.itemService.loader.d)}}function y(e,r){if(1&e&&(a.cc(0,"div",11),a.cc(1,"span",12),a.Mc(2,"\xd7"),a.bc(),a.cc(3,"div",13),a.Mc(4),a.bc(),a.bc()),2&e){var t=a.oc();a.Jb(4),a.Oc(" ",t.error," ")}}var L,S,T=((L=function(){function e(r,t,i){_classCallCheck(this,e),this.itemService=r,this.transmissionService=t,this.activatedRoute=i,this.isAdminTab=!1}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,t,i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.activatedRoute.snapshot.data.data,t=r.data,!(i=r.error)){e.next=3;break}return e.abrupt("return",this.error=i);case 3:this.itemService.ElementList=t.filter((function(e){return n.getElement(e)})),this.transmissionService.displayOrderBase=t,this.itemService.dragdropList=this.itemService.ElementList.filter((function(e){return e.required})),this.itemService.dragdropListTc=t.filter((function(e){return e.required})),this.itemService.releaseElementList=t.filter((function(e){return n.getReleaseElement(e)})),this.itemService.lineElementList=t.filter((function(e){return n.getLineElement(e)})),this.itemService.releasedragdropList=this.itemService.releaseElementList.filter((function(e){return e.display&&e.required})),this.itemService.linedragdropList=this.itemService.lineElementList.filter((function(e){return e.display&&e.required}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getElement",value:function(e){return this.transmissionService.getElement(e)}},{key:"getReleaseElement",value:function(e){return e.path.length>1?!e.type.includes("Transaction Line")&&e.display:!(!e.display||!this.transmissionService.getElement(e))&&!e.type.includes("Line")&&e.display}},{key:"getLineElement",value:function(e){return e.path.length>1?e.display&&e.type.includes("Transaction Line"):!(!e.display||!this.transmissionService.getElement(e))&&e.display&&e.type.includes("Line")}}]),e}()).\u0275fac=function(e){return new(e||L)(a.Wb(c),a.Wb(o.a),a.Wb(d.a))},L.\u0275cmp=a.Qb({type:L,selectors:[["app-order-base"]],viewQuery:function(e,r){var t;1&e&&a.Sc(f,!0),2&e&&a.Cc(t=a.lc())&&(r.myInputVariable=t.first)},decls:2,vars:2,consts:[[4,"ngIf"],["class","alert danger",4,"ngIf"],["dynamicHeight","",3,"color"],["label","Download Template"],[3,"hasChild","tabTitle","itemService","isAdminTab"],["label","Create Template"],[1,"ui","active","inverted","dimmer"],["class","ui active inverted dimmer",4,"ngIf"],[1,"example-h2"],["mode","buffer",2,"width","50%",3,"color","bufferValue","value"],[1,"ui","text","loader"],[1,"alert","danger"],["onclick","this.parentElement.style.display='none';",1,"closebtn"],[1,"alert-header"]],template:function(e,r){1&e&&(a.Lc(0,g,7,10,"ng-container",0),a.Lc(1,y,5,1,"div",1)),2&e&&(a.vc("ngIf",!r.error),a.Jb(1),a.vc("ngIf",r.error))},directives:[u.m,l.b,l.a,h.a,p.a],styles:[""]}),L),_=t("jvDc"),I=t("tk/3"),O=t("ZRbq"),w=[{path:"",component:T}],C=((S=function e(){_classCallCheck(this,e)}).\u0275mod=a.Ub({type:S}),S.\u0275inj=a.Tb({factory:function(e){return new(e||S)},providers:[c,{provide:I.a,useClass:O.a,multi:!0}],imports:[[d.i.forChild(w),_.a]]}),S)}}]);